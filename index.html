<!DOCTYPE html>

<html>
    
<head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    
</head>
    
<body>

<img id="grass" src="https://lh3.googleusercontent.com/-Nygm-dDnL-U/Wo4oEOxnj9I/AAAAAAAAHfI/A5CKKdW6R8E02-hyRQCj9lf7asBaGxOIgCL0BGAYYCw/h23/2018-02-21.png" width="22" height="22">
<img id="blank" src="https://lh3.googleusercontent.com/-KdARkbOh70Y/Wo4InWSwDoI/AAAAAAAAHeQ/zBJOonpYSFI3bM5zYdWhGJ9guxu9Na1pQCL0BGAYYCw/h22/2018-02-21.png" width="22" height="22">
<img id="house1" src="https://lh3.googleusercontent.com/-ZK4lUoix7_8/Wo4o9E5NM7I/AAAAAAAAHfQ/Ez5r1Z7KpLkg8RbblpLC9tSehBkGlYVXgCL0BGAYYCw/h34/2018-02-21.png" width="22" height="22">
<img id="house2" src="https://lh3.googleusercontent.com/-O85d993XyhQ/Wo4tyy6m6xI/AAAAAAAAHfo/582YvNvQ1gsNB1hfbS8V0XHMN5aiLkDAQCL0BGAYYCw/h34/2018-02-21.png" width="22" height="22">
<img id="water" src="./index_files/Water.png" width="22" height="22">
<img id="blackMask" src="./index_files/BlackMask.png" width="22" height="22">
<img id="whiteMask" src="./index_files/WhiteMask.png" width="22" height="22">
    
<canvas id="myCanvas" width="480" height="360" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>
    
    <p>Welcome to Peter and David's 1920s game! Walk around in real life and see your location change on the fictional map of a large city in the 20s. As you move around, you will see conversations
    between people as satirical political cartoons portraying the clashing cultures and ideologies of the times, as well as the problems America was facing.</p>
    
    <p>The player moves in real life to create a more involved, immersive experience. The political cartoons are historically relevant portrayals of exagerated conversations people might have been having
    and exist to show the contrasts of the time frame.</p>
    
    <p>Credits: Peter did the game, David did the cartoons</p>
    
<script>
setInterval(onTimerTick, 2000);
const devMode = 0;
    
let dx, dy, viewX, viewY, oldViewX = 0, oldViewY = 0, c = document.getElementById("myCanvas"), ctx = c.getContext("2d"), grass = document.getElementById("grass"), water = document.getElementById("water"), blackMask = document.getElementById("blackMask"), whiteMask = document.getElementById("whiteMask");
var billstan = ["https://lh3.googleusercontent.com/-XKIBJobnqkA/Wo40JxA-W3I/AAAAAAAAHgU/-gnJSM1O8J0_R_S9jeazpraIs87GTCUeACL0BGAYYCw/h2476/2018-02-21.jpg",
                "https://lh3.googleusercontent.com/-z2m2O7kcjWA/Wo40NKBpGMI/AAAAAAAAHgU/6S0pVArjuFIpfgVFxS1ygP1uNXQyffAJACL0BGAYYCw/h551/2018-02-21.png",
                "https://lh3.googleusercontent.com/-hnPIKOMDqaU/Wo40uTb80RI/AAAAAAAABv8/FeGelcB8eFYZfN9vwoO_1Q6Y6IMNAn99QCL0BGAYYCw/h395/2018-02-21.jpg",
                "https://lh3.googleusercontent.com/-ESxjgFVWd3Q/Wo40u7AW_tI/AAAAAAAABv8/ygANU3LbIAYmWnvUahqFDxB986G-_1VkQCL0BGAYYCw/h395/2018-02-21.jpg",
                "https://lh3.googleusercontent.com/-7349xf_g1Fg/Wo40vQFj0HI/AAAAAAAABv8/HKI-cBxscD0a3fMLbRm3OPguL_qiAEdywCL0BGAYYCw/h395/2018-02-21.jpg",
                "https://lh3.googleusercontent.com/-8_-FOZ6VuIY/Wo40v_cXeRI/AAAAAAAABv8/hbtITSSdU_MheF3qahGfyjLtH0AThHYkwCL0BGAYYCw/h395/2018-02-21.jpg",
                "https://lh3.googleusercontent.com/-ZS6IUJW7LQg/Wo40wTQKqFI/AAAAAAAABv8/blFQrP7S1fUOcq0VABN59okmn9bkfGPVQCL0BGAYYCw/h395/2018-02-21.jpg"]
function onTimerTick() {
    
    if(devMode === 0){
        
        if (navigator.geolocation) {
            
            navigator.geolocation.getCurrentPosition(showPosition);
            
        } else {
            console.error("location not accessible")
        }
        
    } else {
        
        dx = 0;
        dy = 11;
        drawFrame();
        
    }
    
}
    
function showPosition(position) {
    
    viewX = (position.coords.longitude)/5;
    viewY = (position.coords.latitude)/5;
    console.log("x: " + viewX + "y: " + viewY); 
    
    console.log(viewX.toString() + viewY.toString());
    
    dx = (Math.round(viewX*2000))*11;
    dy = (Math.round(viewY*2000))*11;
                                     
   if((viewX != oldViewX) || (viewY != oldViewY)){
    drawFrame();
   oldViewX = viewX;
   oldViewY = viewY;
   } else {
       console.log("hey");
       window.open(billstan[Math.floor(Math.random() * Math.floor(max))]);
   }
    
}
    
function drawFrame() {
                        
    for (let tileID = 0; tileID < 3600; tileID++) {
        
        let XHome = (tileID % 60) * 11  - (Math.floor(tileID / 60)) * 11, YHome = (335 - (Math.floor(tileID / 60)) * 5.5) - (tileID % 60) * 5.5;
        
        /*
        var YOffset = ((Math.round((
                      (Math.sin((dx+XHome)*0.025)*20)+
                      (Math.sin((dy+YHome)*0.025)*20);
                      )/5.5))*5.0)-25;
        */
        
        let YOffset = ((Math.round((
                      (Math.sin((dx+XHome+000)*0.01)*20)+
                      (Math.cos((dy+YHome+000)*0.01)*20)+
                      (Math.sin((dx+XHome+100)*0.02)*15)+
                      (Math.cos((dy+YHome+100)*0.025)*15)+
                      (Math.sin((dx+XHome+000)*0.040)*3.5)+
                      (Math.cos((dy+YHome+000)*0.040)*3.5)+
                      (Math.sin((dx+XHome+350)*0.050)*3)+
                      (Math.cos((dy+YHome+350)*0.050)*3)+
                      (Math.sin((dx+XHome+030)*0.075)*2)+
                      (Math.cos((dy+YHome+025)*0.070)*2)+
                      (Math.sin((dx+XHome+100)*0.085)*1.5)+
                      (Math.cos((dy+YHome+330)*0.080)*1.5)+
                      (Math.sin((dy+dx+XHome+YHome)*0.040)*3)+
                      (Math.cos((dy-dx-XHome+YHome+330)*0.030)*3)+
                      (Math.sin((dx-dy+XHome-YHome+880)*0.035)*3)+
                      (Math.cos((dx-dy+XHome+YHome+44)*0.025)*4)
                      )/5.5))*5.5)-25;
        
        let YPos = YHome + YOffset, XPos = XHome;
        
        if (YOffset<-35) {
            
            let XRender = XPos + 240, YRender = -1 * ( YHome -36) + 180;
            
            ctx.drawImage(water,XRender,YRender);
            
            for (n = 0; n < -(YOffset/7)-3; n=n+0.5) {
                
                ctx.drawImage(blackMask,XRender,YRender);
                
            }
                        
        } else {
            
            let XRender = XPos + 240, YRender = 180 - YPos;
                                     
            if(Math.round(Math.random() * 3) == 1){
            if(Math.round(Math.random() * 3) == 1){
            ctx.drawImage(grass,XRender,YRender);  
            } else {
            ctx.drawImage(blank,XRender,YRender);  
            }
            } else {
            if(Math.round(Math.random() * 2) == 1){
            ctx.drawImage(blank,XRender,YRender);
            } else {
            if(Math.round(Math.random() * 1) == 1){
            ctx.drawImage(house1,XRender,(YRender-5.5)); 
            } else {
            ctx.drawImage(house2,XRender,(YRender-5.5)); 
            }
            }
            }
        
            
            for (let n = 0; n < (YOffset/10); n+=0.2) {
                
                ctx.drawImage(whiteMask,XRender,YRender);
                
            }
            for (let n = 0; n < -(YOffset/12); n+=0.2) {
                
                ctx.drawImage(blackMask,XRender,YRender);
                
            }
                        
        }
        
    }
        
}
</script>

</body>

</html>
